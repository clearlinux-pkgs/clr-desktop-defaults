From f97ec630bfb3a042dd05ef82b382f3a7c67e438f Mon Sep 17 00:00:00 2001
From: "Simental Magana, Marcos" <marcos.simental.magana@intel.com>
Date: Mon, 11 Mar 2019 18:23:44 -0600
Subject: [PATCH 1/2] fontconfig: ban {75,100}dpi fonts.

Signed-off-by: Simental Magana, Marcos <marcos.simental.magana@intel.com>
---
 fontconfig/70-disable-x11-75-100-dpi.conf | 23 +++++++++++++++++++++++
 fontconfig/meson.build                    |  4 ++++
 meson.build                               |  1 +
 3 files changed, 28 insertions(+)
 create mode 100644 fontconfig/70-disable-x11-75-100-dpi.conf
 create mode 100644 fontconfig/meson.build

diff --git a/fontconfig/70-disable-x11-75-100-dpi.conf b/fontconfig/70-disable-x11-75-100-dpi.conf
new file mode 100644
index 0000000..5c930d5
--- /dev/null
+++ b/fontconfig/70-disable-x11-75-100-dpi.conf
@@ -0,0 +1,23 @@
+<?xml version="1.0"?>
+<!DOCTYPE fontconfig SYSTEM "fonts.dtd">
+<fontconfig>
+    <!--
+        xorg-fonts package provides X11/75dpi and X11/100dpi
+        fonts, which are non-desired for corrent rendering in some
+        applications (e.g: firefox).
+
+        Some documentation (e.g: archlinux |
+        https://wiki.archlinux.org/index.php/Font_configuration#Disable_bitmap_fonts
+        ) recommends to disable completely bitmap fonts, but that
+        also bans some well behaved fonts such as terminus.
+
+        So what we do is to explicitly reject the offending
+        bitmap fonts instead.
+    -->
+    <description>Reject X11/{75,100}dpi fonts</description>
+    <selectfont>
+        <rejectfont>
+            <glob>/usr/share/fonts/X11/*dpi</glob>
+        </rejectfont>
+    </selectfont>
+</fontconfig>
diff --git a/fontconfig/meson.build b/fontconfig/meson.build
new file mode 100644
index 0000000..058c243
--- /dev/null
+++ b/fontconfig/meson.build
@@ -0,0 +1,4 @@
+install_data(
+    '70-disable-x11-75-100-dpi.conf',
+    install_dir : join_paths(datadir, 'defaults', 'fonts', 'conf.d')
+)
diff --git a/meson.build b/meson.build
index 7f6910e..76efc63 100644
--- a/meson.build
+++ b/meson.build
@@ -58,3 +58,4 @@ install_data(
 subdir('dconf')
 subdir('schemas')
 subdir('logind.conf.d')
+subdir('fontconfig')
-- 
2.20.1

